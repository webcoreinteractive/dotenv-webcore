"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("node:path"),t=require("fs"),n=require("path"),r=require("os");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=s(e),c=s(t),a=s(n),i=s(r),p={exports:{}},l={name:"dotenv",version:"16.0.3",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{require:"./lib/main.js",types:"./lib/main.d.ts",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^17.0.9",decache:"^4.6.1",dtslint:"^3.7.0",sinon:"^12.0.1",standard:"^16.0.4","standard-markdown":"^7.1.0","standard-version":"^9.3.2",tap:"^15.1.6",tar:"^6.1.11",typescript:"^4.5.4"},engines:{node:">=12"}};const d=c.default,u=a.default,v=i.default,f=l.version,g=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function m(e){console.log(`[dotenv@${f}][DEBUG] ${e}`)}const y={config:function(e){let t=u.resolve(process.cwd(),".env"),n="utf8";const r=Boolean(e&&e.debug),s=Boolean(e&&e.override);var o;e&&(null!=e.path&&(t="~"===(o=e.path)[0]?u.join(v.homedir(),o.slice(1)):o),null!=e.encoding&&(n=e.encoding));try{const e=y.parse(d.readFileSync(t,{encoding:n}));return Object.keys(e).forEach((function(t){Object.prototype.hasOwnProperty.call(process.env,t)?(!0===s&&(process.env[t]=e[t]),r&&m(!0===s?`"${t}" is already defined in \`process.env\` and WAS overwritten`:`"${t}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[t]=e[t]})),{parsed:e}}catch(e){return r&&m(`Failed to load ${t} ${e.message}`),{error:e}}},parse:function(e){const t={};let n,r=e.toString();for(r=r.replace(/\r\n?/gm,"\n");null!=(n=g.exec(r));){const e=n[1];let r=n[2]||"";r=r.trim();const s=r[0];r=r.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===s&&(r=r.replace(/\\n/g,"\n"),r=r.replace(/\\r/g,"\r")),t[e]=r}return t}};var b=p.exports.config=y.config,j=p.exports.parse=y.parse;p.exports=y;var h=p.exports;function x(e,t,n){const r=function(e,t){const n=Array.from(e.matchAll(t));return n.length>0?n.slice(-1)[0].index:-1}(e,/(?!(?<=\\))\$/g);if(-1===r)return e;const s=e.slice(r).match(/((?!(?<=\\))\${?([\w]+)(?::-([^}\\]*))?}?)/);if(null!=s){const[,r,o,c]=s;return x(e.replace(r,t[o]||c||n.parsed[o]||""),t,n)}return e}function $(e){return e.replace(/\\\$/g,"$")}var w=function(e){const t=e.ignoreProcessEnv?{}:process.env;for(const n in e.parsed){const r=Object.prototype.hasOwnProperty.call(t,n)?t[n]:e.parsed[n];e.parsed[n]=$(x(r,t,e))}for(const n in e.parsed)t[n]=e.parsed[n];return e};const O=/(?<content>.*)::(?<type>\w*)$/,k=(e,t={})=>{if(!O.test(e))return e;const{type:n,content:r}=O.exec(e).groups;switch(n){case"number":case"int":case"float":return+r;case"bool":let s;try{s=JSON.parse(r)}catch(e){}return!!s;case"json":let o;try{o=JSON.parse(r)}catch(e){}return o;case"date":return new Date(r);default:return t&&t[n]?t[n](r):e}},E=(e,t={})=>{if(!e&&"object"==typeof process&&process?.env&&(e=process.env),"object"!=typeof e)return{};let n={};for(const r in e)n[r]=k(e[r],t);return n},S=(e={},t={},n=null)=>{const r="object"==typeof process&&process?.env?{...process.env}:{};n||(n=process.cwd());const s=o.default.resolve(n,".env.default"),c=o.default.resolve(n,`.env.${process.env.BASE_CONFIG_ENV||process.env.CONFIG_ENV||"development"}`),a=w(b({path:s})),i=w(b({path:c,...e})),p={...r,...a.parsed,...i?.parsed};return E(p,t)};var N={config:b,decrypt:h.decrypt,parse:j,expand:w,load:S,convert:k,convertall:E};exports.config=b,exports.convert=k,exports.convertall=E,exports.decrypt=h.decrypt,exports.default=N,exports.expand=w,exports.load=S,exports.parse=j;
