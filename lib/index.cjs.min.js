"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("path"),n=require("fs"),t=require("os");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=s(e),o=s(n),a=s(t),i={},c={exports:{}},p={name:"dotenv",version:"16.0.3",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{require:"./lib/main.js",types:"./lib/main.d.ts",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^17.0.9",decache:"^4.6.1",dtslint:"^3.7.0",sinon:"^12.0.1",standard:"^16.0.4","standard-markdown":"^7.1.0","standard-version":"^9.3.2",tap:"^15.1.6",tar:"^6.1.11",typescript:"^4.5.4"},engines:{node:">=12"}};const d=o.default,l=r.default,u=a.default,f=p.version,v=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function g(e){console.log(`[dotenv@${f}][DEBUG] ${e}`)}const m={config:function(e){let n=l.resolve(process.cwd(),".env"),t="utf8";const s=Boolean(e&&e.debug),r=Boolean(e&&e.override);var o;e&&(null!=e.path&&(n="~"===(o=e.path)[0]?l.join(u.homedir(),o.slice(1)):o),null!=e.encoding&&(t=e.encoding));try{const e=m.parse(d.readFileSync(n,{encoding:t}));return Object.keys(e).forEach((function(n){Object.prototype.hasOwnProperty.call(process.env,n)?(!0===r&&(process.env[n]=e[n]),s&&g(!0===r?`"${n}" is already defined in \`process.env\` and WAS overwritten`:`"${n}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[n]=e[n]})),{parsed:e}}catch(e){return s&&g(`Failed to load ${n} ${e.message}`),{error:e}}},parse:function(e){const n={};let t,s=e.toString();for(s=s.replace(/\r\n?/gm,"\n");null!=(t=v.exec(s));){const e=t[1];let s=t[2]||"";s=s.trim();const r=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===r&&(s=s.replace(/\\n/g,"\n"),s=s.replace(/\\r/g,"\r")),n[e]=s}return n}};c.exports.config=m.config,c.exports.parse=m.parse,c.exports=m;var y=c.exports,j={};function b(e,n,t){const s=function(e,n){const t=Array.from(e.matchAll(n));return t.length>0?t.slice(-1)[0].index:-1}(e,/(?!(?<=\\))\$/g);if(-1===s)return e;const r=e.slice(s).match(/((?!(?<=\\))\${?([\w]+)(?::-([^}\\]*))?}?)/);if(null!=r){const[,s,o,a]=r;return b(e.replace(s,n[o]||a||t.parsed[o]||""),n,t)}return e}function x(e){return e.replace(/\\\$/g,"$")}j.expand=function(e){const n=e.ignoreProcessEnv?{}:process.env;for(const t in e.parsed){const s=Object.prototype.hasOwnProperty.call(n,t)?n[t]:e.parsed[t];e.parsed[t]=x(b(s,n,e))}for(const t in e.parsed)n[t]=e.parsed[t];return e};const h=r.default,{config:w,decrypt:$,parse:O}=y,{expand:k}=j,E=/(?<content>.*)::(?<type>\w*)$/,S=h.resolve(process.cwd(),".env.default"),D=h.resolve(process.cwd(),`.env.${process.env.CONFIG_ENV||"development"}`),q=(e,n)=>{if(!E.test(e))return e;const{type:t,content:s}=E.exec(e).groups;switch(t){case"number":case"int":case"float":return+s;case"json":return JSON.parse(s);case"date":return new Date(s);default:return n[t](s)}};var A=i.config=w,B=i.decrypt=$,F=i.parse=O,N=i.expand=k,P=i.load=(e={},n={})=>{const t=k(w({path:S})),s=k(w({path:D,...e})),r={...t.parsed,...s?.parsed};let o={};for(const e in r)o[e]=q(r[e]);return o},_=i.convert=q;exports.config=A,exports.convert=_,exports.decrypt=B,exports.default=i,exports.expand=N,exports.load=P,exports.parse=F;
